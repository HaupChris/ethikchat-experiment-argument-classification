#!/bin/bash
#SBATCH --job-name=resume_model_run
#SBATCH --partition=ls6prio
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=4
#SBATCH --mem=32G
#SBATCH --gres=gpu:1
#SBATCH --output=resume_run_%A_%a.out
#SBATCH --error=resume_run_%A_%a.err

# Define project, model directory and dataset paths
#sweep_id="5qgtbfrb"
sweep_id="e3xgfhuq"

project_root="/home/ls6/hauptmann/ethikchat-experiment-argument-classification"
models_dir="${project_root}/experiments_outputs/${sweep_id}"
test_dataset_path="${project_root}/data/processed/with_context/dataset_split_in_distribution/test"
corpus_dataset_path="""${project_root}/data/processed/with_context/corpus_dataset_v2"

# Define lists for run_ids and model_paths
run_ids=(
#"f37li40u"
#"n3djgjwu"
#"u3uwocgb"
#"mjl1ofdf"
#"yfoxxx1c"
#"1vdcjh48"
#"kjl2hd76"
#"s13zonkh"
#"8l8b3jag"
#"whynh5tz"
#"arsczn4h"
#"xxbw9mtr"
#"bg6ks35w"
#"xi4ttii1"
#"li4qmdeh"
#"fyt2jrdc"
#"jjqobnbj"
#"hur26ez7"
#"zfcaulrd"
#"mipafdpd"
#"x2puop5o"
#"1a9gbxoy"
#"ijulipno"
#"uxz308mq"
#"u06fr6vh"
#"19x96hwf"
#"phmuppnt"
#"9ddssml9"
#"7t71vw42"
#"k72tqmir"
#"16b0ind0"
#"1rhkbxfs"
#"2l639n08"
#"q1xc9tv8"
#"5q262ver"
#"k6nrods4"
#"5qsfntjg"
#"nzn1mazq"
#"n3n7c7g9"
#"fla5lhco"
#"5byn4gz4")
"ru8lyf3q"
"ih7ugi0a"
"5u2dumx4"
"pp65ca8r"
"xac4xj8p"
"iki6evek"
"tb1jbfdt"
"5jirknob"
"ej2c1plm"
"nkixqm6b"
"qf4lrla2"
"es0m4l8j"
"gd17ty7n"
"bdj86o8k"
"mz9ipsid"
"om16hkc3"
"1o16926l"
"8o0qonyv"
"9t7kg13x"
"b0ibwyui"
"ofiy7m54"
"afgqhrqu"
"4vi0970a"
"e6lf1aef"
"bo3l11yz"
"zw8cwjqm"
"9wjldqee"
"ak2z8i3c"
"qkp4rjgv"
"s2vw118a"
"d8c13o3k"
"np7sht7r"
"p3hyuc6q"
"ytdu094x"
"v8lmahpc"
"9oxr1skl"
"rt8tm573"
"lao15v1n"
)

run_names=(
#"electric-sweep-38/"
#"fragrant-sweep-16/"
#"feasible-sweep-24/"
#"jolly-sweep-10/"
#"jumping-sweep-36/"
#"graceful-sweep-19/"
#"treasured-sweep-40/"
#"gallant-sweep-32/"
#"absurd-sweep-9/"
#"visionary-sweep-15/"
#"sweepy-sweep-25/"
#"gallant-sweep-23/"
#"eager-sweep-33/"
#"grateful-sweep-35/"
#"usual-sweep-14/"
#"wobbly-sweep-37/"
#"soft-sweep-21/"
#"fine-sweep-12/"
#"visionary-sweep-18/"
#"fragrant-sweep-17/"
#"honest-sweep-5/"
#"daily-sweep-18/"
#"feasible-sweep-26/"
#"stellar-sweep-41/"
#"copper-sweep-30/"
#"brisk-sweep-17/"
#"glowing-sweep-39/"
#"polar-sweep-12/"
#"lemon-sweep-34/"
#"good-sweep-20/"
#"expert-sweep-13/"
#"summer-sweep-9/"
#"sleek-sweep-22/"
#"dazzling-sweep-12/"
#"celestial-sweep-11/"
#"cool-sweep-29/"
#"still-sweep-6/"
#"iconic-sweep-7/"
#"amber-sweep-28/"
#"vague-sweep-27/"
#"mild-sweep-31/")
"exalted-sweep-13/"
"wobbly-sweep-14/"
"silver-sweep-4/"
"likely-sweep-29/"
"swept-sweep-8/"
"neat-sweep-16/"
"wobbly-sweep-23/"
"daily-sweep-5/"
"crisp-sweep-12/"
"wandering-sweep-27/"
"unique-sweep-1/"
"upbeat-sweep-17/"
"winter-sweep-10/"
"serene-sweep-7/"
"amber-sweep-20/"
"cool-sweep-11/"
"driven-sweep-15/"
"wild-sweep-6/"
"classic-sweep-31/"
"brisk-sweep-21/"
"lunar-sweep-3/"
"twilight-sweep-18/"
"fancy-sweep-19/"
"lively-sweep-37/"
"fresh-sweep-35/"
"clear-sweep-36/"
"pretty-sweep-25/"
"woven-sweep-34/"
"usual-sweep-38/"
"genial-sweep-30/"
"efficient-sweep-9/"
"smart-sweep-24/"
"comfy-sweep-22/"
"crimson-sweep-33/"
"astral-sweep-2/"
"earthy-sweep-28/"
"sleek-sweep-32/"
"gallant-sweep-26/"
)

# Export project_root to PYTHONPATH for the Python script
export PYTHONPATH="${project_root}:${PYTHONPATH}"

# Activate the virtual environment
source "${project_root}/venv/bin/activate"

# Run the python script
python resume_model_run.py --run_ids "${run_ids[@]}" --run_names "${run_names[@]}" --project_root $project_root --models_dir $models_dir --test_dataset_path $test_dataset_path --corpus_dataset_path $corpus_dataset_path